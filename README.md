![image](FocalLengthAnalyzer_logo.png)

一个基于 Python 的图像分析工具，用于自动统计摄影师在不同焦段下的拍摄习惯。通过分析图片 EXIF 数据，生成可视化的焦段使用报告，帮助摄影师了解自己的拍摄偏好并为镜头升级提供数据支持。

## ✨ 功能特性

- 📁 **批量分析** - 支持 JPG、RAW、PNG 等多种图片格式
- 🔍 **EXIF 提取** - 自动读取焦段和相机型号信息
- 📐 **等效焦段计算** - 自动转换为 35mm 等效焦段（支持裁切系数配置）
- 🧮 **手动补全** - 支持手动输入缺失的 EXIF 数据，并保存用户输入
- 📊 **可视化图表** - 生成焦段分组饼图和常用焦段柱状图
- 📈 **统计报告** - 输出详细统计结果与镜头升级建议
- 💾 **自动保存** - 结果保存至带时间戳的输出文件夹

## 🚀 快速开始

1. **准备图片**
   将需要分析的图片放入 input_photos 文件夹

2. **运行分析**
   运行`FocalLengthAnalyzer.exe`

3. **处理缺失数据**
   - 如果图片缺少 EXIF 数据，程序会提示手动输入焦段和传感器尺寸
   - 输入的信息会自动保存，避免重复输入

4. **查看结果**
   - 统计报告会在终端显示
   - 详细数据和图表保存在 `outputs/年月日时分秒/` 目录下

## 📁 源代码结构

```
.
├── main.py                      # 主程序文件
├── camera_crop_factors.json     # 相机裁切系数配置
├── missing_exif_data.json       # 手动输入的EXIF数据缓存
├── input_photos/                # 输入图片文件夹
└── outputs/                     # 输出结果文件夹（自动生成）
    └── 20241201123045/          # 带时间戳的输出目录
        ├── focal_length_analysis.png    # 可视化图表
        └── focal_length_details.csv     # 详细数据
```

## ⚙️ 配置文件

### camera_crop_factors.json
```json
{
  "sony ilce-7m3": 1.0,
  "canon eos r6": 1.0,
  "nikon z6": 1.0,
  "fujifilm x-t4": 1.5,
  "canon eos 90d": 1.6
}
```

### missing_exif_data.json（自动生成）
```json
{
  "DSC12345.jpg": {
    "focal_length": 50,
    "crop_factor": 1.5,
    "equivalent_focal": 75.0,
    "sensor_choice": "2",
    "timestamp": "2024-01-15T10:30:00"
  }
}
```

## 📊 输出示例

### 统计报告
```
==================================================
       焦段使用统计结果
==================================================
总图片数量: 156
不同焦段分组数量: 8
不同具体焦段数量: 15

焦段分组统计:
------------------------------
广角 (24-28mm)          45张 ( 28.8%)
标准 (50mm)             38张 ( 24.4%)
人像 (85mm)             27张 ( 17.3%)
...
```

### 可视化图表
- **焦段使用分布饼图** - 显示各焦段分组的占比
- **最常用焦段柱状图** - 显示前15个最常用的具体焦段

## 🛠️ 自定义配置

### 添加相机型号
在 `camera_crop_factors.json` 中添加新的相机型号和裁切系数。

## 🤝 贡献

- 欢迎提交 Issue 和 Pull Request！
- 源代码：`@Pos2333` with Deepseek-R1

## 📄 许可证

本项目采用 GNU General Public License v3.0 - 详见 [LICENSE](LICENSE) 文件。

## 💡 使用建议

- 建议分析至少50张以上图片以获得有意义的统计结果
- 定期清理 `missing_exif_data.json` 文件以避免数据冗余

---
**让数据指导你的摄影装备升级决策！** 📷✨
